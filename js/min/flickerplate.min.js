/**
 * flickerplate.js
 *
 * Author:        Chris Humboldt
 * Last Edited:   10 October 2013
 * Edited By:   	Chris Humboldt
 */(function(e){var t=function(){var t=this,n=0,r=!1,i=!1,s=!1,o=!1,u=0,a=0,f=!1;t.settings={block_text:!0,inner_width:!1,theme:"light",flick_animation:"transform-slide",auto_flick:!0,delay:10,dot_navigation:!0,dot_alignment:"center",arrows:!0};t.init=function(i,s){t.settings=e.extend(t.settings,s);r=i;r.find("ul:first").addClass("flicks");r.find("li:first").addClass("first-flick");r.attr("data-flick-position",n);var o=r.data("flick-animation");if(o&&o.length>0){o=="transform-slide"?t.settings.flick_animation="transform-slide":o=="transition-slide"?t.settings.flick_animation="transition-slide":o=="jquery-slide"?t.settings.flick_animation="jquery-slide":o=="scroller-slide"&&(t.settings.flick_animation="scroller-slide");r.addClass("animate-"+o)}else r.addClass("animate-"+t.settings.flick_animation);var a=r.data("theme"),l=r.find(".first-flick").data("theme");if(a&&a.length>0){t.settings.theme=a;l&&l.length>0?r.addClass("flicker-theme-"+l):r.addClass("flicker-theme-"+a)}else r.addClass("flicker-theme-"+t.settings.theme);var c=r.data("block-text");c&&c.length>0&&c=="no"&&(t.settings.block_text=!1);r.find("li").each(function(){u++;e(this).wrapInner('<div class="flick-inner"><div class="flick-content"></div></div>');$flick_block_text=e(this).data("block-text");if($flick_block_text&&$flick_block_text.length>0){if($flick_block_text!="no"){e(this).find(".flick-title").wrapInner('<span class="flick-block-text"></span>');e(this).find(".flick-sub-text").wrapInner('<span class="flick-block-text"></span>')}}else if(t.settings.block_text==1){e(this).find(".flick-title").wrapInner('<span class="flick-block-text"></span>');e(this).find(".flick-sub-text").wrapInner('<span class="flick-block-text"></span>')}var n=e(this).data("background");n&&n.length>0&&e(this).css("background-image","url("+n+")");$flick_theme=e(this).data("theme");$flick_theme&&$flick_theme.length>0&&e(this).addClass("flick-theme-"+$flick_theme)});if(t.settings.flick_animation!="scroller-slide"){$data_arrow_navigation=r.data("arrows");$data_arrow_navigation&&$data_arrow_navigation.length>0?$data_arrow_navigation!="no"&&t.create_arrow_navigation():t.settings.arrows==1&&t.create_arrow_navigation();$data_dot_navigation=r.data("dots");$data_dot_alignment=r.data("dots-alignment");var h=t.settings.dot_alignment;$data_dot_alignment&&$data_dot_alignment.length>0&&($data_dot_alignment=="left"?h="left":$data_dot_alignment=="right"&&(h="right"));$data_dot_navigation&&$data_dot_navigation.length>0?$data_dot_navigation!="no"&&t.create_dot_navigation(h):t.settings.dot_navigation==1&&t.create_dot_navigation(h);$flick_delay=t.settings.delay*1e3;$data_auto_flick=r.data("auto-flick");$data_auto_flick_delay=r.data("auto-flick-delay");$data_auto_flick_delay&&e.web_is_integer($data_auto_flick_delay)==1&&($flick_delay=$data_auto_flick_delay*1e3);$data_auto_flick&&$data_auto_flick.length>0&&($data_auto_flick!="no"?t.settings.auto_flick=!0:t.settings.auto_flick=!1);t.auto_flick_start();t.flick_flicker();t.settings.flick_animation!="jquery-slide"&&r.find("ul.flicks").bind("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){f=!1})}};t.flick_flicker=function(){Modernizr.touch&&r.on("drag",function(e){if(f==0&&e.orientation=="horizontal"){e.preventDefault();if(e.direction==1){n--;if(n<0)n=0;else{f=!0;t.move_flicker(n)}}else{n++;if(n==u)n=u-1;else{f=!0;t.move_flicker(n)}}}})};t.create_arrow_navigation=function(){$arrow_nav_html='<div class="arrow-navigation left"><div class="arrow"></div></div>';$arrow_nav_html+='<div class="arrow-navigation right"><div class="arrow"></div></div>';r.prepend($arrow_nav_html);e(".arrow-navigation").mouseover(function(){e(this).hasClass("hover")==0&&e(this).addClass("hover")});e(".arrow-navigation").mouseout(function(){e(this).hasClass("hover")==1&&e(this).removeClass("hover")});e(".arrow-navigation").on("click",function(){if(e(this).hasClass("right")){n++;n==u&&(n=0)}else{n--;n<0&&(n=u-1)}t.move_flicker(n)})};t.create_dot_navigation=function(n){$dot_nav_html='<div class="dot-navigation '+n+'"><ul>';while(a<u){a++;a==1?$dot_nav_html+='<li><div class="dot active"></div></li>':$dot_nav_html+='<li><div class="dot"></div></li>'}$dot_nav_html+="</ul></div>";r.prepend($dot_nav_html);r.find(".dot-navigation li").on("click",function(){t.move_flicker(e(this).index())})};t.auto_flick_start=function(){t.settings.auto_flick==1&&(t.flicker_auto=setInterval(t.auto_flick,$flick_delay))};t.auto_flick=function(){n++;n==u&&(n=0);t.move_flicker(n)};t.auto_flick_stop=function(){t.flicker_auto=clearInterval(t.flicker_auto)};t.auto_flick_reset=function(){t.auto_flick_stop();t.auto_flick_start()};t.move_flicker=function(e){n=e;t.settings.flick_animation=="transform-slide"?r.find("ul.flicks").attr({style:"-webkit-transform:translate3d(-"+n+"%, 0, 0);-o-transform:translate3d(-"+n+"%, 0, 0);-moz-transform:translate3d(-"+n+"%, 0, 0);transform:translate3d(-"+n+"%, 0, 0)"}):t.settings.flick_animation=="transition-slide"?r.find("ul.flicks").attr({style:"left:-"+n+"00%;"}):t.settings.flick_animation=="jquery-slide"&&r.find("ul.flicks").animate({left:"-"+n+"00%"},function(){f=!1});$crt_flick=r.find("ul.flicks li:eq("+n+")");r.removeClass("flicker-theme-light").removeClass("flicker-theme-dark");$crt_flick.hasClass("flick-theme-dark")?r.addClass("flicker-theme-dark"):$crt_flick.hasClass("flick-theme-ligh")?r.addClass("flicker-theme-light"):r.addClass("flicker-theme-"+t.settings.theme);r.find(".dot-navigation .dot.active").removeClass("active");r.find(".dot:eq("+n+")").addClass("active");r.attr("data-flick-position",n);t.auto_flick_reset()}};e.fn.flicker=function(n){var r=this.length;return this.each(function(i){var s=e(this),o="flickerplate"+(r>1?"-"+ ++i:""),u=(new t).init(s,n);s.data(o,u).data("key",o)})}})(jQuery);